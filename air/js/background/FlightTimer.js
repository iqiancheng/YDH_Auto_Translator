var getFlightTimer=function(n,t){return arguments[1]===undefined&&(t=config.monitor.interval),new Timer(n,t,config.monitor.interval,function(n){var r=(new FlightMonitorBox).get(n.id),t=r.flight,u=r.monitor,o=t.getData(),f,i=!1;try{u.lastTime=Util.date.now();f=t.getData(!0);u.type=="absolute"?parseInt(f.main.price,10)<parseInt(u.price,10)&&(Storage.set("showStage",{name:"ticketNotice",data:t.getId()}),i=!0):parseInt(f.main.price,10)!=parseInt(o.main.price,10)&&(Storage.set("showStage",{name:"ticketNotice",data:t.getId()}),i=!0);delete r.error;chrome.browserAction.setBadgeText({text:""})}catch(e){e.name==="QuerySoldOutError"?(Storage.set("showStage",{name:"ticketAdvice",data:{errors:[{flightId:t.getId(),status:"已售罄"}],advice:"请您重新设置"}}),n.halt(),i=!0):e.name==="QueryDateError"&&(Storage.set("showStage",{name:"ticketAdvice",data:{errors:[{flightId:t.getId(),status:"已过期"}],advice:"请您重新设置"}}),n.halt(),i=!0);r.error=e;chrome.browserAction.setBadgeText({text:"!"})}finally{(new FlightMonitorBox).persistenceOne(t.getId())}i&&Util.popup()})}